# by default (CopyArrivalDate no), if you copy an old email from inbox to
# Archive (e.g.) it will get the date of the copy assigned, instead of just
# keeping its original date of arrival! That doesn't sound like a very good
# default to me. Also see:
# https://rakhim.org/fastmail-setup-with-emacs-mu4e-and-mbsync-on-macos/
# https://wiki.archlinux.org/index.php/Isync#Emails_on_remote_server_have_the_wrong_date
CopyArrivalDate yes

#
# Apple iCloud
#
IMAPAccount icloud
Host imap.mail.me.com
User julio.villasante@me.com
AuthMechs LOGIN
SSLType IMAPS
SSLVersions TLSv1
PassCmd "security find-generic-password -a Offlineimap -s julio.villasante@icloud.com -w"

IMAPStore icloud-remote
Account icloud

MaildirStore icloud-local
Path ~/.Mail/julio.villasante@icloud.com/
Inbox ~/.Mail/julio.villasante@icloud.com/Inbox
Trash trash

Channel icloud-folders
Master :icloud-remote:
Slave :icloud-local:
Patterns "INBOX" "Drafts" "Arch*" "Sent*" "Trash" "Junk" "Deleted*"
Create Both
Expunge Both
SyncState *

Group icloud
Channel icloud-folders

#
# Google Gmail
#
IMAPAccount gmail
Host imap.gmail.com
User jvillasantegomez@gmail.com
PassCmd "security find-generic-password -a Offlineimap -s jvillasantegomez@gmail.com -w"
AuthMechs LOGIN
SSLType IMAPS
CertificateFile /usr/local/etc/openssl@1.1/cert.pem
PipelineDepth 50

IMAPStore gmail-remote
Account gmail

MaildirStore gmail-local
Subfolders Verbatim
Path ~/.Mail/jvillasantegomez@gmail.com/
Inbox ~/.Mail/jvillasantegomez@gmail.com/Inbox

Channel gmail
Master :gmail-remote:
Slave :gmail-local:
Patterns * ![Gmail]* "[Gmail]/Sent Mail" "[Gmail]/Starred" "[Gmail]/All Mail" "[Gmail]/Trash" "[Gmail]/Drafts"
Create Both
SyncState *
Sync All
